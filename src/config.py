import os
from dotenv import load_dotenv

# 載入 .env 檔案中的環境變數
# 這應該是專案啟動時最先被執行的部分之一，確保環境變數已載入
load_dotenv()

class Settings:
    """
    應用程式的所有配置設定。
    從環境變數載入，並提供預設值。
    """
    # 中央氣象署 API 金鑰
    # 建議在 .env 檔案中設定 CWA_API_KEY
    CWA_API_KEY: str = os.getenv("CWA_API_KEY", "YOUR_DEFAULT_CWA_API_KEY_IF_NOT_SET")

    # YouTube 影片清單的 JSON 檔案路徑
    # 這是服務內部讀取的資料檔案路徑
    YT_VIDEOS_JSON_PATH: str = "data/YT_weather_matched.json"
    # YT_VIDEOS_JSON_PATH: str = "data/YT_weather_matched_embed.json"

    # 電影海報圖片的根目錄 (在 statics 下)
    # 這是後端用來掃描海報圖片的實際檔案系統路徑
    MOVIE_POSTER_FILES_ROOT: str = "src/statics/movie"

    # 靜態檔案在 URL 中的前綴
    # 例如：/static/movie/poster1.jpg
    STATIC_URL_PREFIX: str = "/statics"

    # 背景音樂檔案路徑 (在 statics 下)
    # 前端可以透過 STATIC_URL_PREFIX/music/TipToe.mp3 訪問
    BACKGROUND_MUSIC_PATH: str = "src/statics/music/TipToe.mp3"

    # 手動校正字典 (從原檔案複製，或可考慮放在 JSON 檔中載入)
    MANUAL_CORRECTIONS = {
        "台北市": "臺北市", "台北": "臺北市", "北市": "臺北市", "北": "臺北市",
        "新北": "新北市", "臺北縣": "新北市",
        "桃園": "桃園市", "桃園縣": "桃園市", "桃": "桃園市", "園": "桃園市",
        "台中": "臺中市", "台中市": "臺中市", "台中縣": "臺中市", "臺中縣": "臺中市", "中縣": "臺中市", "中市": "臺中市", "臺中": "臺中市", "中": "臺中市",
        "台南": "臺南市", "台南市": "臺南市", "臺南": "臺南市", "台南縣": "臺南市", "臺南縣": "臺南市",
        "高雄": "高雄市", "雄市": "高雄市",  "雄": "高雄市", "高雄縣": "高雄市",
        "基隆": "基隆市", "基": "基隆市", "隆": "基隆市", "雞": "基隆市", "籠": "基隆市", "雞籠": "基K隆市", "基隆縣": "基隆市", "基市": "基隆市", "隆市": "基隆市", "雞市": "基隆市", "籠市": "基隆市", "雞籠市": "基隆市", "雞籠縣": "基隆市", "雞縣": "基隆市", "籠縣": "基隆市",
        "新竹": "新竹市", "竹": "新竹市", "竹市": "新竹市", "竹縣": "新竹縣",
        "嘉義": "嘉義市", "嘉": "嘉義市", "義": "嘉義市", "嘉縣": "嘉義縣", "義縣": "嘉義縣",
        "苗栗": "苗栗縣", "苗": "苗栗縣", "栗": "苗栗縣", "栗縣": "苗栗縣", "苗縣": "苗栗縣", "苗栗市": "苗栗縣",
        "彰化": "彰化縣", "彰": "彰化縣", "化": "彰化縣", "彰縣": "彰化縣", "化縣": "彰化縣", "彰化市": "彰化縣",
        "南投": "南投縣", "投": "南投縣", "投縣": "南投縣", "南投市": "南投縣",
        "雲林": "雲林縣", "雲": "雲林縣", "林": "雲林縣", "雲縣": "雲林縣", "林縣": "雲林縣", "雲林市": "雲林縣",
        "屏東": "屏東縣", "屏": "屏東縣", "屏縣": "屏東縣", "屏東市": "屏東縣", "琉球嶼": "屏東縣", "小琉球": "屏東縣", "琉球": "屏東縣",
        "宜蘭": "宜蘭縣", "宜": "宜蘭縣", "蘭": "宜蘭縣", "宜縣": "宜蘭縣", "蘭縣": "宜蘭縣", "宜蘭市": "宜蘭縣", "龜山島": "宜蘭縣",
        "花蓮": "花蓮縣", "花": "花蓮縣", "蓮": "花蓮縣", "花縣": "花蓮縣", "蓮縣": "花蓮縣", "花蓮市": "花蓮縣",
        "台東": "臺東縣", "台東縣": "臺東縣", "台東市": "臺東縣", "綠島": "臺東縣", "綠鳥": "臺東縣", "蘭嶼": "臺東縣",
        "澎湖": "澎湖縣", "澎": "澎湖縣", "湖": "澎湖縣", "澎縣": "澎湖縣", "湖縣": "澎湖縣", "澎湖市": "澎湖縣",
        "金門": "金門縣", "金": "金門縣", "門": "金門縣", "金縣": "金門縣", "門縣": "金門縣", "金門市": "金門縣",
        "連江": "連江縣", "連江市": "連江縣", "馬祖": "連江縣", "馬縣": "連江縣", "祖縣": "連江縣", "連": "連江縣", "江": "連江縣", "連縣": "連江縣", "江縣": "連江縣"
    }

    # 天氣關鍵字映射 (從原檔案複製)
    WEATHER_KEYWORDS_MAP = {
        "晴天": "晴", "晴朗": "晴", "太陽": "晴", "大太陽": "晴", "晴": "晴",
        "雨天": "雨", "下雨": "雨", "大雨": "雨", "小雨": "雨", "雷雨": "雨", "雨": "雨",
        "陰天": "陰", "灰濛濛": "陰", "陰沉": "陰", "陰": "陰",
        "多雲": "多雲", "雲": "多雲",
        "雪天": "雪", "下雪": "雪", "大雪": "雪", "暴雪": "雪", "雪": "雪",
    }

settings = Settings()